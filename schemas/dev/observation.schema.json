{
  "$schema": "https://json-schema.org/draft-07/schema",
  "$id": "https://raw.githubusercontent.com/globaldothealth/isaric/main/schemas/dev/observation.schema.json",
  "title": "Study observation",
  "description": "Observations relating to a visit, including vital signs and symptoms",
  "required": [
    "phase",
    "date",
    "name"
  ],
  "oneOf": [
    {
      "required": [
        "text"
      ]
    },
    {
      "required": [
        "value"
      ]
    },
    {
      "required": [
        "is_present"
      ]
    }
  ],
  "properties": {
    "dataset_id": {
      "type": "string",
      "description": "Dataset ID, refers to a specific version",
      "category": "metadata"
    },
    "observation_id": {
      "type": "integer",
      "description": "Unique ID of observation",
      "category": "metadata"
    },
    "visit_id": {
      "type": "string",
      "description": "Visit ID, linked with visit table"
    },
    "subject_id": {
      "type": "string",
      "description": "Subject ID that this observation refers to"
    },
    "phase": {
      "enum": [
        "pre-admission",
        "admission",
        "study",
        "followup"
      ],
      "description": "Phase of study"
    },
    "date": {
      "type": "string",
      "anyOf": [
        {
          "format": "date"
        },
        {
          "format": "date-time"
        }
      ],
      "description": "Date of observation, or end date of observation period"
    },
    "start_date": {
      "type": "string",
      "anyOf": [
        {
          "format": "date"
        },
        {
          "format": "date-time"
        }
      ],
      "description": "Start date of observation duration"
    },
    "duration_type": {
      "enum": [
        "event",
        "block"
      ],
      "default": "event",
      "description": "Duration type, either present throughout the period (block), or something that occurred within the period (event)"
    },
    "value": {
      "type": "number",
      "description": "Value of the observation"
    },
    "text": {
      "type": "string",
      "description": "Value of the observation (text)"
    },
    "is_present": {
      "type": "boolean",
      "description": "Whether the observation denotes presence (*true*) or absence (*false*)"
    },
    "context": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "uniqueItems": true,
      "description": "Context that qualifies the observation, e.g. *axillary* temperature, or *room air* oxygen saturation measurement"
    },
    "name": {
      "enum": [
        "avpu",
        "clinical_classification_critical_illness_scale",
        "pneumonia",
        "clinical_frailty_score",
        "diastolic_blood_pressure_mmHg",
        "glasgow_coma_score",
        "abdominal_pain",
        "altered_consciousness_confusion",
        "anorexia",
        "base_excess",
        "bleeding",
        "bleeding_haemorrhage",
        "chest_pain",
        "confusion",
        "conjunctivitis",
        "cough",
        "cough_dry",
        "cough_with_haemoptysis",
        "cough_with_sputum_production",
        "cyanosis",
        "diarrhoea",
        "ear_pain",
        "fatigue_malaise",
        "feeding_intolerance_pediatrics",
        "headache",
        "hepatomegaly",
        "history_of_fever",
        "inability_to_walk",
        "inability_to_walk_scale",
        "irritability_pediatrics",
        "joint_pain",
        "loss_of_smell",
        "loss_of_taste",
        "loss_of_smell_or_taste",
        "lower_chest_wall_indrawing",
        "lung_sounds",
        "lymphadenopathy",
        "muscle_aches",
        "runny_nose",
        "seizures",
        "severe_dehydration",
        "shortness_of_breath",
        "skin_rash",
        "skin_ulcers",
        "sore_throat",
        "sternal_capillary_refill_time_greater_2s",
        "vomiting_nausea",
        "wheezing",
        "heart_rate_bpm",
        "heart_sounds",
        "mean_arterial_blood_pressure_mmHg",
        "mid_upper_arm_circumference_cm",
        "other_symptom",
        "oxygen_o2hb",
        "oxygen_saturation_percent",
        "oxygen_flow_volume_max",
        "pao2_mmHg",
        "pco2_mmHg",
        "pH",
        "respiratory_rate",
        "richmond_agitation-sedation_scale",
        "riker_sedation-agitation_scale",
        "systolic_blood_pressure_mmHg",
        "temperature_celsius",
        "total_fluid_output_ml"
      ],
      "description": "Observation name"
    }
  },
  "dependencies": {
    "start_date": {
      "required": [
        "duration_type"
      ]
    }
  }
}
