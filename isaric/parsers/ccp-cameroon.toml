#:schema ../../schemas/dev/parser.schema.json

[adtl]
  name = "ccp-cameroon"
  description = "CCP CAMEROON"
  defaultDateFormat = "%d/%m/%Y"

  [adtl.tables.subject]
    kind = "groupBy"
    groupBy = "subject_id"
    aggregation = "lastNotNull"
    schema = "../../schemas/dev/subject.schema.json"
    optional-fields = ["ethnicity"]

  [adtl.tables.visit]
    kind = "groupBy"
    groupBy = "subject_id"
    aggregation = "lastNotNull"
    schema = "../../schemas/dev/visit.schema.json"

  [adtl.tables.observation]
    kind = "oneToMany"
    schema = "../../schemas/dev/observation.schema.json"
    common = { visit_id = { field = "record_id", sensitive = true } }

[adtl.defs]
  "Y/N" = { values = { 1 = true, 2 = false } }

  [adtl.defs.admissionObsDate]
    combinedType = "firstNonNull"
    fields = [
      { field = "q0_signs_symptoms", if = { redcap_event_name = "recruitment_arm_1" } },
      { field = "q2_onset" },
    ]

  [adtl.defs.outcomeDate]
    combinedType = "firstNonNull"
    fields = [
      { field = "q14_treatment_outcome", description = "14) End date of treatment / Date d'arrêt du traitement" },
      { field = "q9_outcome", description = "9) Outcome- transfer date /Date de sortie- transfert" },
    ]

[subject]
  pathogen = "COVID-19"

  [subject.subject_id]
    field = "record_id"
    sensitive = true

  [subject.enrolment_date]
    field = "q1_demographics"
    description = "1) Enrolment date / Date d'inclusion"

  [subject.earliest_admission_date]
    combinedType = "min"
    fields = [
      { field = "q2_onset", description = "2) Admission date at this facility / Date de consultation dans la FOSA de l'étude:" },
    ]

  [subject.age]
    combinedType = "firstNonNull"
    fields = [
      { field = "q5_demographics", description = "5) Estimated Age / Age estimé" },
      { field = "q4_demographics", description = "4) Date of birth / Date de naissance", apply = { function = "yearsElapsed", params = [
        "$q1_demographics",
        "%d/%m/%Y",
        "%d/%m/%Y",
      ] } },
    ]
    unit = "years"
    source_unit = { field = "q6_demographics", description = "6) Unité de l' âge du participant", values = { 2 = "months", 1 = "years" } }

  [subject.sex]
    field = "q2_demographics"
    description = "2) Sex / Sexe"
    values = { 1 = "male", 2 = "female" }

  [subject.works_healthcare]
    field = "q7_demographics"
    description = "7) Employed as a health care worker / Employé en tant que travailleur de la santé ?                                                                                                "
    values = { 1 = true, 2 = false }

  [subject.works_microbiology_lab]
    field = "q8_demographics"
    description = "8) If health professional, specify / Si professionnel de santé"
    values = { 1 = false, 2 = false, 3 = false, 4 = false, 5 = true, 6 = false, 7 = false }

  [subject.has_asthma]
    field = "q3_co_morbidities"
    description = "3) Asthma (physician diagnosed) / Asthme (diagnostiqué par un médecin)"
    ref = "Y/N"

  [subject.pregnancy]
    field = "q17_demographics"
    description = "17) Pregnant / Enceinte?"
    ref = "Y/N"

  [subject.pregnancy_birth_weight_kg]
    field = "q28_demographics"
    description = "28) Birth weight / Poids de naissance"
    unit = "kg"
    source_unit = { field = "q29_demographics", description = "29) Unit / Unité", values = { 1 = "kg", 2 = "lbs" } }

  [subject.pregnancy_gestational_age_weeks]
    field = "q18_demographics"
    description = "18) If YES: Gestational weeks assessment / Si OUI, préciser l'âge gestationnel"

  [subject.pregnancy_gestational_outcome]
    field = "q30_demographics"
    description = "30) Gestational outcome / Nouveau- né"
    values = { 1 = "term_birth", 2 = "preterm_birth" }

  [subject.pregnancy_outcome]
    field = "q20_demographics"
    description = "20) Pregnancy Outcome / Produit de la grossesse"
    values = { 1 = "live birth", 2 = "still birth" }

  [subject.pregnancy_whether_breastfed]
    field = "q31_demographics"
    description = "31) Breastfed / Avez- vous pratiqué l'allaitement maternel?"
    ref = "Y/N"

  [subject.has_chronic_cardiac_disease]
    field = "q1_co_morbidities"
    description = "1) Chronic cardiac disease, including congenital heart disease  (not hypertension) / Maladies cardiaques chroniques, y compris les cardiopathies congénitales  (pas l'hypertension)"
    ref = "Y/N"

  [subject.has_chronic_hematologic_disease]
    field = "q9_co_morbidities"
    description = "9) Chronic hematologic disease / Maladie hématologique chronique"
    ref = "Y/N"

  [subject.has_chronic_kidney_disease]
    field = "q4_co_morbidities"
    description = "4) Chronic kidney disease / Maladie rénale chronique"
    ref = "Y/N"

  [subject.has_dementia]
    field = "q16_co_morbidities"
    description = "16) Dementia / Démence"
    ref = "Y/N"

  [subject.has_diabetes]
    combinedType = "any"

    [[subject.has_diabetes.fields]]
      field = "q14_co_morbidities"
      description = "14) Diabetes without complications / Troubles rhumatologique"
      ref = "Y/N"

    [[subject.has_diabetes.fields]]
      field = "q13_co_morbidities"
      description = "13) Diabetes with complications / Diabète avec complications"
      ref = "Y/N"

[subject.has_tuberculosis]
  field = "q10_co_morbidities"
  description = "10) Tuberculosis / Tuberculose"
  ref = "Y/N"

[subject.has_hiv]
  combinedType = "any"
  fields = [
    { field = "q11_co_morbidities", description = "11) AIDS - HIV / VIH -SIDA", ref = "Y/N" },
    { field = "q5_pathogen_testing", ref = "Y/N" },
  ]

[subject.has_hypertension]
  field = "q21_co_morbidities"
  description = "18) Hypertension/ hypertension arterielle"
  ref = "Y/N"

[subject.has_liver_disease]
  combinedType = "any"

  [[subject.has_liver_disease.fields]]
    field = "q5_co_morbidities"
    description = "5) Moderate or severe liver disease / Maladie du foie modérée ou grave"
    ref = "Y/N"

  [[subject.has_liver_disease.fields]]
    field = "q6_co_morbidities"
    description = "6) Mild liver disease / Maladie hépatique légère"
    ref = "Y/N"

[subject.has_malignant_neoplasm]
  field = "q8_co_morbidities"
  description = "8) Malignant neoplasm / Néoplasme malin"
  ref = "Y/N"

[subject.has_malnutrition]
  field = "q17_co_morbidities"
  description = "17) Malnutrition / Malnutrition"
  ref = "Y/N"

[subject.has_obesity]
  field = "q12_co_morbidities"
  description = "12) Obesity (as defined by clinical staff ie BMI= Weight/(height)2? 30 / Obésité (telle que définie par le personnel clinique càd IMC= Poids/(taille en mètres)² ? 30"
  ref = "Y/N"

[subject.has_rheumatologic_disorder]
  field = "q15_co_morbidities"
  description = "15) Rheumatologic disorder"
  ref = "Y/N"

[subject.has_smoking]
  field = "q18_co_morbidities"
  description = "18) Smoking / Tabagisme"
  values = { 1 = "yes", 2 = "never", 3 = "former" }

[subject.has_comorbidity_other]
  combinedType = "set"
  excludeWhen = "none"
  fields = [
    { field = "q20_co_morbidities", description = "20) Other relevant risk factor  / Autre facteur de risque pertinent" },
  ]

[subject.icu_admitted]
  field = "q1_treatment"
  description = "1) ICU or High Dependency Unit admission / Admission à l'Unité de Soins Intensifs ?"
  ref = "Y/N"
  if = { redcap_event_name = "week_2_d14_arm_1" }

[subject.has_died]
  combinedType = "any"
  fields = [
    { field = "q1_outcome", values = { 5 = true } },
    { field = "q1_treatment_outcome", values = { 5 = true } },
    { field = "q9_ae_sae", apply = { function = "isNotNull" } },
  ]


[subject.date_death]
  combinedType = "firstNonNull"
  fields = [
    { field = "q9_ae_sae" },
    { field = "q9_outcome", if = { q1_outcome = 5 } },
    { field = "q14_treatment_outcome", if = { q1_treatment_outcome = 5 } },
  ]

[visit]
  country_iso3 = "CMR"

  [visit.subject_id]
    field = "record_id"
    sensitive = true

  [visit.visit_id]
    field = "record_id"
    sensitive = true

  [visit.icu_admission]
    field = "q1_treatment"
    description = "1) ICU or High Dependency Unit admission / Admission à l'Unité de Soins Intensifs ?  "
    ref = "Y/N"
    if = { redcap_event_name = "week_2_d14_arm_1" }

  [visit.icu_admission_dates]
    combinedType = "set"
    excludeWhen = "none"
    if = { redcap_event_name = "week_2_d14_arm_1" }

    [[visit.icu_admission_dates.fields]]
      field = "q4_treatment"
      description = "4) Date of ICU admission / Date d'admission à l'USI"

[visit.transfer_from_other_facility]
  field = "q3_onset"
  description = "3) Transfer from other facility / Transfert à partir d'une autre FOSA"
  values = { 1 = true, 2 = true, 3 = false }

[visit.pathogen_test_date]
  field = "q1_covid_pathogen_testing"
  description = "1) Collection Date/ Date du prélèvement"
  source_date = "%d-%m-%Y"

[visit.start_date]
  field = "q2_onset"

[visit.treatment_antibiotics]
  field = "q5_medication"
  description = "5) Antibiotic / Antibiotique ?"
  ref = "Y/N"

[visit.treatment_antivirals]
  field = "q2_medication"
  description = "2) Antiviral agent / Antiviral? "
  ref = "Y/N"

[visit.treatment_antiviral_type]
  combinedType = "set"
  excludeWhen = "none"
  fields = [
    { field = "q3_medication", description = "3) If YES / Si OUI", values = { 1 = "Ribavirin", 2 = "Lopinavir/Ritonvir", 3 = "Interferon alpha", 4 = "Interferon beta", 5 = "Neuraminidase inhibitor", 6 = "Other" } },
  ]

[visit.treatment_antiviral_type_other]
  combinedType = "set"
  excludeWhen = "false-like"
  fields = [
    { field = "q4_medication", description = "4) If Other, specify / Si autre, Préciser" },
  ]

[visit.treatment_antifungal_agent]
  field = "q12_medication"
  description = "12) Antifungal agent / Agent antifongique?"
  ref = "Y/N"

[visit.treatment_corticosteroid]
  field = "q8_medication"
  description = "8) Corticosteroid / Corticostéroïdes?"
  ref = "Y/N"

[visit.treatment_cardiovascular_support]
  combinedType = "any"
  fields = [
    { field = "q14_treatment", description = "14) Extracorporeal support / Soutien extracorporel ?", ref = "Y/N" },
    { field = "q16_treatment", description = "16) Inotropes - vasopressors / 	Inotropes -vasopresseurrs?", ref = "Y/N" },
  ]

[visit.treatment_experimental_agent]
  field = "q15_medication"
  description = "15) ELIXIR COVID and or ADSK COVID (Medication of Mgr Kleda)  / ELIXIR COVID et ou ADSAK COVID (Médicaments de MGR KLEDA) "
  ref = "Y/N"

[visit.treatment_dialysis]
  field = "q15_treatment"
  description = "15) Renal replacement therapy (RRT) or dialysis / 	Thérapie de substitution rénale (TRS) ou dialyse ?"
  ref = "Y/N"

[visit.treatment_ecmo]
  field = "q14_treatment"
  description = "14) Extracorporeal support / Soutien extracorporel ?"
  ref = "Y/N"

[visit.treatment_inhaled_nitric_oxide]
  field = "q12_treatment"
  description = "12) Inhaled Nitric Oxide /  Inhalation d'oxyde nitrique ?"
  ref = "Y/N"

[visit.treatment_inotropes_vasopressors]
  field = "q16_treatment"
  description = "16) Inotropes - vasopressors / 	Inotropes -vasopresseurrs?"
  ref = "Y/N"

[visit.treatment_invasive_ventilation]
  field = "q9_treatment"
  description = "9) Invasive ventilation (Any) / Ventilation invasive (tout) ?"
  ref = "Y/N"

[visit.treatment_noninvasive_ventilation]
  field = "q8_treatment"
  description = "8) Non-invasive ventilation / Ventilation non invasive ? (ex: BIPAP, CPAP) ? (e.g. BIPAP, CPAP) "
  ref = "Y/N"

[visit.treatment_antimalarial]
  field = "q1_medication"
  description = "Hydroxychloroquine/Chloroquinine"
  ref = "Y/N"

[visit.treatment_oxygen_therapy]
  combinedType = "any"
  fields = [
    { field = "q7_treatment", description = "7) Oxygen therapy / Oxygénothérapie?", ref = "Y/N" },
    { field = "q8_treatment", description = "8) Non-invasive ventilation (e.g. BIPAP, CPAP)", ref = "Y/N" },
    { field = "q9_treatment", description = "9) Invasive ventilation (Any)?", ref = "Y/N" },
    { field = "q11_treatment", description = "11) Prone Ventilation?", ref = "Y/N" },
    { field = "q14_treatment", description = "14) Extracorporeal support?", ref = "Y/N" },
  ]


[visit.treatment_prone_position]
  field = "q11_treatment"
  description = "11) Prone Ventilation / Ventilation en position couchée?"
  ref = "Y/N"

[visit.treatment_other]
  combinedType = "set"
  excludeWhen = "none"
  fields = [
    # { field = "q8_onset", description = "8) If so, what did you consume? - Other / Si oui ,qu'avez vous consommé d'autres ?", ref = "Y/N" },
    # { field = "q9_hcare_practice", description = "9) If yes (please specify)  / Si oui, préciser" },
    { field = "q20_medication", description = "20) If YES, please provide  dose / Si OUI, veuillez indiquer la dose" },
    { field = "q21_treatment", description = "21) OTHER intervention or procedure (please specify)", if = { all = [
      { q21_treatment = { "!=" = "no" } },
      { q21_treatment = { "!=" = "Non" } },
      { q21_treatment = { "!=" = "NA" } },
      { q21_treatment = { "!=" = "N/A" } },
      { q21_treatment = { "!=" = 0 } },
      { q21_treatment = { "!=" = "No" } },
    ] } },
    { field = "q4_health_care" },
    { field = "q6_health_care" },
    { field = "q8_health_care" },
    { field = "q10_health_care" },
  ]

[visit.outcome]
  combinedType = "set"
  fields = [
    { field = "q1_treatment_outcome", description = "1) Outcome of treatment /Issue du traitement" },
    { field = "q1_outcome", description = "1) Outcome of healthcare facility / Issue de la FOSA " },
  ]

  [visit.outcome.values]
    1 = "hospitalised"
    2 = "discharged"
    3 = "transferred"
    4 = "transferred"
    5 = "death"
    6 = "discharged"
    7 = "palliative discharge"

[visit.date_outcome]
  combinedType = "firstNonNull"
  fields = [
    { field = "q14_treatment_outcome", description = "14) End date of treatment / Date d'arrêt du traitement", apply = { function = "isNotNull", params = [
      "q1_treatment_outcome",
    ] } },
    { field = "q9_outcome", apply = { function = "isNotNull", params = [
      "q1_outcome",
    ] } },
  ]

[[observation]]
  name = "abdominal_pain"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q30_signs_symptoms"
    description = "30) Abdominal pain /Douleur abdominale"
    values = { 1 = true, 2 = false }

[[observation]]
  name = "altered_consciousness_confusion"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q28_signs_symptoms"
    description = "28) Altered consciousness/confusion / Altération de la conscience/confusion"
    values = { 1 = true, 2 = false }

[[observation]]
  name = "bleeding_haemorrhage"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q37_signs_symptoms"
    description = "37) Bleeding (Haemorrhage) /Saignement (Haemorragie)"
    values = { 1 = true, 2 = false }

[[observation]]
  name = "chest_pain"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q19_signs_symptoms"
    description = "19) Chest pain /Douleur thoracique"
    values = { 1 = true, 2 = false }

[[observation]]
  name = "conjunctivitis"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q33_signs_symptoms"
    description = "33) Conjunctivitis / Yeux rouge/ conjonctivite"
    values = { 1 = true, 2 = false }

[[observation]]
  name = "cough"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    combinedType = "any"
    fields = [
      { field = "q12_signs_symptoms", description = "12) Cough / Toux", values = { 1 = true, 2 = false } },
      { field = "q13_signs_symptoms", description = "13) Cough - with sputum production / Toux Grasse/ productive", values = { 1 = true, 2 = false } },
      { field = "q14_signs_symptoms", description = "14) Cough - bloodysputum/haemoptysis / Toux, Hémopthysie/ Crachats sanguinolents", values = { 1 = true, 2 = false } },
    ]

[[observation]]
  name = "cough_dry"
  phase = "admission"
  date = { ref = "admissionObsDate" }
  is_present = { field = "q12_signs_symptoms", description = "12) Cough / Toux", values = { 1 = true, 2 = false } }

[[observation]]
  name = "cough_with_sputum_production"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q13_signs_symptoms"
    description = "13) Cough - with sputum production / Toux Grasse/ productive"
    values = { 1 = true, 2 = false }

[[observation]]
  name = "cough_with_haemoptysis"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q14_signs_symptoms"
    description = "14) Cough - bloodysputum/haemoptysis / Toux, Hémopthysie/ Crachats sanguinolents"
    values = { 1 = true, 2 = false }

[[observation]]
  name = "diarrhoea"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q32_signs_symptoms"
    description = "32) Diarrhoea / Diarrhée"
    values = { 1 = true, 2 = false }

[[observation]]
  name = "diastolic_blood_pressure_mmHg"
  phase = "study"
  start_date = { field = "q2_onset" }
  date = { field = "q14_treatment_outcome", apply = { function = "isNotNull" } }
  duration_type = "event"

  [observation.value]
    field = "q6_signs_symptoms"
    source_unit = "mmHg"
    description = "6) Diastolic BP / Tension artérielle diastolique"

[[observation]]
  name = "ear_pain"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q17_signs_symptoms"
    description = "17) Ear pain / Otalgie"
    values = { 1 = true, 2 = false }

[[observation]]
  name = "fatigue_malaise"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q22_signs_symptoms"
    description = "22) Fatigue , Malaise"
    values = { 1 = true, 2 = false }

[[observation]]
  name = "headache"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q27_signs_symptoms"
    description = "27) Headache / Céphalées"
    values = { 1 = true, 2 = false }

[[observation]]
  name = "heart_rate_bpm"
  phase = "study"
  start_date = { field = "q2_onset" }
  date = { field = "q14_treatment_outcome", apply = { function = "isNotNull" } }
  duration_type = "event"
  value = { field = "q3_signs_symptoms", description = "3) HR/ Fréquence cardiaque", if = { redcap_event_name = "week_2_d14_arm_1" } }

[[observation]]
  name = "history_of_fever"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q11_signs_symptoms"
    description = "11) History of fever / Histoire de fièvre"
    values = { 1 = true, 2 = false }

[[observation]]
  name = "joint_pain"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q21_signs_symptoms"
    description = "21) Joint pain (Arthralgia) / Douleur articulaire (Arthralgie)"
    values = { 1 = true, 2 = false }

[[observation]]
  name = "loss_of_smell_or_taste"
  phase = "admission"
  date = { ref = "admissionObsDate" }
  [observation.is_present]
    combinedType = "any"
    fields = [
      { field = "q24_signs_symptoms", description = "24) Loss of sense of smell", values = { 1 = true, 2 = false } },
      { field = "q25_signs_symptoms", description = "25) Loss of flavour", values = { 1 = true, 2 = false } },
    ]

[[observation]]
  name = "loss_of_smell"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q24_signs_symptoms"
    description = "24) Loss of sense of smell / Perte de l'odorat"
    values = { 1 = true, 2 = false }

[[observation]]
  name = "loss_of_taste"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q25_signs_symptoms"
    description = "25) Loss of flavour / Perte de saveur"
    values = { 1 = true, 2 = false }

[[observation]]
  name = "lower_chest_wall_indrawing"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q26_signs_symptoms"
    description = "26) Lower chest wall indrawing / Tiraillement de la paroi thoracique inférieure"
    values = { 1 = true, 2 = false }

[[observation]]
  name = "lymphadenopathy"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q36_signs_symptoms"
    description = "36) Lymphadenopathy / Lymphadenopathie"
    values = { 1 = true, 2 = false }

[[observation]]
  name = "muscle_aches"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q20_signs_symptoms"
    description = "20) Muscle aches (Myalgia) / Douleur musculaire (Myalgie)"
    values = { 1 = true, 2 = false }

[[observation]]
  name = "oxygen_saturation_percent"
  phase = "study"
  start_date = { field = "q2_onset" }
  date = { field = "q14_treatment_outcome", apply = { function = "isNotNull" } }
  duration_type = "event"
  value = { field = "q9_signs_symptoms", description = "9) Oxygen saturation / Saturation en oxygéne" }

  [observation.context]
    combinedType = "set"
    excludeWhen = "none"
    fields = [
      { field = "q10_signs_symptoms", description = "on", values = { 1 = "room air", 2 = "oxygen therapy" } },
    ]

[[observation]]
  name = "oxygen_o2hb"
  phase = "study"
  date = { field = "q1_lab_results" }
  value = { field = "q3_lab_results" }

[[observation]]
  name = "pneumonia"
  phase = "study"
  start_date = { field = "q2_onset" }
  date = { field = "q14_treatment_outcome", apply = { function = "isNotNull" } }
  duration_type = "event"
  is_present = { field = "q1_complications", if = { redcap_event_name = "week_2_d14_arm_1" } }
  context = ['viral']

[[observation]]
  name = "pneumonia"
  phase = "study"
  start_date = { field = "q2_onset" }
  date = { field = "q14_treatment_outcome", apply = { function = "isNotNull" } }
  duration_type = "event"
  is_present = { field = "q2_complications", if = { redcap_event_name = "week_2_d14_arm_1" } }
  context = ['bacterial']

[[observation]]
  name = "pneumonia"
  phase = "study"
  start_date = { field = "q2_onset" }
  date = { field = "q14_treatment_outcome", apply = { function = "isNotNull" } }
  duration_type = "event"
  is_present = { field = "q7_complications", if = { redcap_event_name = "week_2_d14_arm_1" } }
  context = ['cryptogenic organizing pneumonia (COP)']

[[observation]]
  name = "respiratory_rate"
  phase = "study"
  start_date = { field = "q2_onset" }
  date = { field = "q14_treatment_outcome", apply = { function = "isNotNull" } }
  duration_type = "event"
  value = { field = "q4_signs_symptoms", description = "4) RR / Fréquence Respiratoire" }

[[observation]]
  name = "runny_nose"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q16_signs_symptoms"
    description = "16) Runny nose (Rhinorrhoea) /Ecoulement nasal (Rhinorrhée)"
    values = { 1 = true, 2 = false }

[[observation]]
  name = "seizures"
  phase = "admission"
  date = { ref = "admissionObsDate" }
  is_present = { field = "q29_signs_symptoms", description = "29) Seizures /Convulsions", values = { 1 = true, 2 = false } }

[[observation]]
  name = "seizures"
  phase = "study"
  start_date = { field = "q2_onset" }
  date = { field = "q14_treatment_outcome", apply = { function = "isNotNull" } }
  duration_type = "event"
  is_present = { field = "q10_complications" }

[[observation]]
  name = "severe_dehydration"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q7_signs_symptoms"
    description = "7) Severe dehydration / Déshydratation sévère"
    ref = "Y/N"

[[observation]]
  name = "shortness_of_breath"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q23_signs_symptoms"
    description = "23) Shortness of breath (Dyspnea) / Difficulté respiratoire/ essoufflement (Dyspnée)"
    values = { 1 = true, 2 = false }

[[observation]]
  name = "skin_rash"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q34_signs_symptoms"
    description = "34) Skin rash / Eruption cutanée"
    values = { 1 = true, 2 = false }

[[observation]]
  name = "skin_ulcers"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q35_signs_symptoms"
    description = "35) Skin ulcers / Ulcères de la peau"
    values = { 1 = true, 2 = false }

[[observation]]
  name = "sore_throat"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q15_signs_symptoms"
    description = "15) Sore throat /Mal de gorge"
    values = { 1 = true, 2 = false }

[[observation]]
  name = "sternal_capillary_refill_time_greater_2s"
  phase = "admission"
  date = { ref = "admissionObsDate" }
  is_present = { field = "q8_signs_symptoms", description = "8) Sternal capillary refill time < 2seconds  / Temps de recoloration cutané < 2secondes", values = { 1 = false, 0 = true } }
  # question asks for time LESS than 2secs so reversed the true/false response

[[observation]]
  name = "systolic_blood_pressure_mmHg"
  phase = "study"
  start_date = { field = "q2_onset" }
  date = { field = "q14_treatment_outcome", apply = { function = "isNotNull" } }
  duration_type = "event"
  value = { field = "q5_signs_symptoms", description = "5) Systolic BP / Tension artérielle systolique", source_unit = "mmHg" }

[[observation]]
  name = "temperature_celsius"
  phase = "study"
  start_date = { field = "q2_onset" }
  date = { field = "q14_treatment_outcome", apply = { function = "isNotNull" } }
  duration_type = "event"
  #context = ["Highest in first 24hrs"]

  [observation.value]
    field = "q1_signs_symptoms"
    description = "1) Temperature"
    unit = "°C"
    source_unit = { field = "q1_signs_symptoms", description = "2) Temperature unit / Unité de la température", values = { 1 = "°C", 2 = "°F" } }

[[observation]]
  name = "vomiting_nausea"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q31_signs_symptoms"
    description = "31) Vomiting / Nausea /Vomissements/ Nausées"
    values = { 1 = true, 2 = false }

[[observation]]
  name = "wheezing"
  phase = "admission"
  date = { ref = "admissionObsDate" }

  [observation.is_present]
    field = "q18_signs_symptoms"
    description = "18) Wheezing / Sifflement"
    values = { 1 = true, 2 = false }
