{
  "name": "isaric-ccpuk",
  "description": "ISARIC CCPUK study",
  "tables": {
    "study": {
      "kind": "constant"
    },
    "subject": {
      "kind": "groupBy",
      "groupBy": "subject_id",
      "aggregation": "lastNotNull"
    },
    "visit": {
      "kind": "groupBy",
      "groupBy": "visit_id",
      "aggregation": "lastNotNull"
    }
  },
  "study": {
    "id": "isaric-ccpuk",
    "date": "2021-01-01",
    "country_iso3": "GBR"
  },
  "primaryKey": {
    "subject": "subject_id",
    "visit": "visit_id"
  },
  "subject": {
    "sex_at_birth": {
      "field": "sex",
      "values": {
        "1": "male",
        "2": "female",
        "3": "non_binary"
      },
      "description": "Sex at Birth"
    },
    "subject_id": {
      "field": "ï»¿subjid",
      "sensitive": true,
      "description": "Participant Identification Number (PIN) specify CPMS Site code (hyphen) four to six digit number patient number e.g. Y0401-0001."
    },
    "study_id": "isaric-ccpuk",
    "country_iso3": "GBR",
    "enrolment_date": {
      "field": "dsstdat",
      "description": "Date of Enrolment"
    },
    "admission_date": {
      "field": "hostdat",
      "description": "Admission date at this facility"
    },
    "ethnicity": {
      "description": "Ethnic groups",
      "comment": "Need to add ethnic other field",
      "combinedType": "list",
      "fields": [
        {
          "field": "ethnic___1",
          "values": {
            "1": "Arab",
            "0": null
          },
          "description": "Arab"
        },
        {
          "field": "ethnic___2",
          "values": {
            "1": "Black",
            "0": null
          },
          "description": "Black"
        },
        {
          "field": "ethnic___3",
          "values": {
            "1": "East_Asian",
            "0": null
          },
          "description": "East_Asian"
        },
        {
          "field": "ethnic___4",
          "values": {
            "1": "South_Asian",
            "0": null
          },
          "description": "South_Asian"
        },
        {
          "field": "ethnic___5",
          "values": {
            "1": "West_Asian",
            "0": null
          },
          "description": "West_Asian"
        },
        {
          "field": "ethnic___6",
          "values": {
            "1": "Latin_American",
            "0": null
          },
          "description": "Latin_American"
        },
        {
          "field": "ethnic___7",
          "values": {
            "1": "White",
            "0": null
          },
          "description": "White"
        },
        {
          "field": "ethnic___8",
          "values": {
            "1": "Aboriginal_First_Nations",
            "0": null
          },
          "description": "Aboriginal_First_Nations"
        }
      ]
    },
    "age": {
      "field": "age_estimateyears",
      "source_unit": {
        "field": "age_estimateyearsu",
        "values": {
          "1": "months",
          "2": "years"
        },
        "unit": "years"
      },
      "description": "Age/Estimated age"
    },
    "pathogen": "COVID-19",
    "pregnancy": {
      "field": "pregyn_rptestcd",
      "values": {
        "1": true,
        "2": false,
        "3": null
      },
      "description": "Pregnant ?"
    },
    "pregnancy_date_of_delivery": {
      "comment": "considers delivery before and after admission",
      "combinedType": "any",
      "fields": [
        {
          "field": "dlvrdtc_rptestcd",
          "description": "Delivery date"
        },
        {
          "field": "dlvrdtc_rptestcd_out",
          "description": "Delivery date"
        }
      ]
    },
    "pregnancy_birth_weight_kg": {
      "field": "apvs_weight",
      "source_unit": {
        "field": "apvs_weightu",
        "values": {
          "1": "kg",
          "2": "lbs"
        },
        "unit": "kg"
      },
      "description": "Birth weight"
    },
    "pregnancy_outcome": {
      "comment": "considers outcome before and after admission",
      "combinedType": "any",
      "fields": [
        {
          "field": "pregout_rptestcd",
          "values": {
            "1": "Live birth",
            "2": "Still birth"
          },
          "description": "Pregnancy Outcome"
        },
        {
          "field": "pregout_rptestcd_out",
          "values": {
            "1": "Live birth",
            "2": "Still birth"
          },
          "description": "Pregnancy Outcome"
        }
      ]
    },
    "pregnancy_gestational_outcome": {
      "field": "apsc_gestout",
      "values": {
        "1": "Term birth",
        "2": "Preterm birth",
        "3": null
      },
      "description": "Gestational outcome"
    },
    "pregnancy_whether_breastfed": {
      "field": "apsc_brfedind",
      "values": {
        "1": true,
        "2": false,
        "3": null
      },
      "description": "Breastfed"
    },
    "pregnancy_post_partum": {
      "comment": "considers status before and after admission",
      "combinedType": "any",
      "fields": [
        {
          "field": "postpart_rptestcd",
          "values": {
            "1": true,
            "0": false,
            "3": null
          },
          "description": "Post Partum (within six weeks of delivery)"
        },
        {
          "field": "postpart_rptestcd_out",
          "values": {
            "1": true,
            "0": false,
            "3": null
          },
          "description": "Post Partum (within six weeks of delivery)"
        }
      ]
    },
    "pregnancy_gestational_assessment_days": {
      "field": "egestage_rptestcd",
      "description": "If YES: Gestational weeks assessment:",
      "comment": "the mapped field 'egestage_rptestcd' has data in weeks not days? there is no related source unit field in the data"
    },
    "has_chronic_hematologic_disease": {
      "field": "chronichaemo_mhyn",
      "values": {
        "1": true,
        "2": false,
        "3": null
      },
      "description": "Chronic hematologic disease"
    },
    "has_dementia": {
      "field": "dementia_mhyn",
      "values": {
        "1": true,
        "2": false,
        "3": null
      },
      "description": "Dementia"
    },
    "has_obesity": {
      "field": "obesity_mhyn",
      "values": {
        "1": true,
        "2": false,
        "3": null
      },
      "description": "Obesity (as defined by clinical staff)"
    },
    "has_rheumatologic_disorder": {
      "field": "rheumatologic_mhyn",
      "values": {
        "1": true,
        "2": false,
        "3": null
      },
      "description": "Rheumatologic disorder"
    },
    "has_hiv": {
      "field": "aidshiv_mhyn",
      "values": {
        "1": true,
        "2": false,
        "3": null
      },
      "description": "AIDS/HIV"
    },
    "has_hypertension": {
      "field": "hypertension_mhyn",
      "values": {
        "1": true,
        "2": false,
        "3": null
      },
      "description": "Hypertension (physician diagnosed)"
    },
    "has_malignant_neoplasm": {
      "field": "malignantneo_mhyn",
      "values": {
        "1": true,
        "2": false,
        "3": null
      },
      "description": "Malignant neoplasm"
    },
    "has_smoking": {
      "field": "smoking_mhyn",
      "values": {
        "1": true,
        "2": "Never",
        "3": "Former",
        "4": null
      }
    },
    "has_asthma": {
      "field": "asthma_mhyn",
      "values": {
        "1": true,
        "0": false,
        "2": null
      },
      "description": "Asthma (physician diagnosed)"
    },
    "has_chronic_cardiac_disease": {
      "field": "chrincard",
      "values": {
        "1": true,
        "2": false,
        "3": null
      },
      "description": "Chronic cardiac disease, including congenital heart disease (not hypertension)"
    },
    "has_chronic_kidney_disease": {
      "field": "renal_mhyn",
      "values": {
        "1": true,
        "2": false,
        "3": null
      },
      "description": "Chronic kidney disease"
    },
    "has_diabetes": {
      "field": "diabetes_mhyn",
      "values": {
        "1": true,
        "2": false,
        "3": null
      },
      "description": "Diabetes without complications"
    },
    "diabetes_type": {
      "field": "diabetes_type_mhyn",
      "values": {
        "0": false,
        "1": "1",
        "2": "2",
        "3": null
      },
      "description": "Diabetes and Type"
    },
    "has_liver_disease": {
      "combinedType": "any",
      "fields": [
        {
          "field": "modliv",
          "values": {
            "1": true,
            "0": false,
            "2": null
          },
          "description": "Moderate liver disease"
        },
        {
          "field": "mildliver",
          "values": {
            "1": true,
            "0": false,
            "2": null
          },
          "description": "Mild liver disease"
        }
      ]
    },
    "has_rare_disease_inborn_metabolism_error": {
      "field": "vulnerable_scid",
      "mapping": {
        "1": true,
        "2": false,
        "3": null
      },
      "description": "People with rare diseases and inborn errors of metabolism that significantly increase the risk of infections (such as Severe combined immunodeficiency (SCID), homozygous sickle cell)"
    },
    "has_immunosuppression_therapy_treatment": {
      "combinedType": "any",
      "fields": [
        {
          "field": "vulnerable_immuno",
          "values": {
            "1": true,
            "2": false,
            "3": null
          },
          "description": "People on immunosuppression therapies sufficient to significantly increase risk of infection"
        },
        {
          "field": "immuno_cmtrt",
          "values": {
            "1": true,
            "2": false,
            "3": null
          },
          "description": "Treated with immunosuppressants, including oral (not inhaled) corticosteroids prior to admission / Immunosuppressant e.g. oral (not inhaled) corticosteroids (not low dose hydrocortisone)"
        }
      ]
    },
    "has_solid_organ_transplant": {
      "field": "vulnerable_transplant",
      "values": {
        "1": true,
        "2": false,
        "3": null
      },
      "description": "Solid organ transplant recipients:"
    },
    "has_comorbidity_other": {
      "otherField": true,
      "fieldSet": {
        "formName": "comorbidities"
      }
    },
    "date_death": {
      "combinedType": "firstNonNull",
      "comment": "using the proposed hierarchy of dates - check if dsstdtc dsterm == 4",
      "fields": [
        {
          "field": "dsstdtc",
          "description": "Outcome date",
          "if": {
            "dsterm": 4
          }
        },
        {
          "field": "flw_date_death",
          "description": "Date of death"
        }
      ]
    },
    "outcome": {
      "field": "dsterm",
      "values": {
        "1": "Discharged alive",
        "2": "Hospitalisation (Remains in Hospital &geq; Day 28 after symptom onset)",
        "3": "Transfer to other facility",
        "4": "Death",
        "5": "Palliative discharge",
        "6": null
      }
    },
    "date_outcome": {
      "field": "dsstdtc",
      "description": "Outcome date"
    }
  },
  "visit": {
    "country_iso3": "GBR",
    "visit_id": {
      "comment": "This is the same as visit id!",
      "field": "ï»¿subjid",
      "sensitive": true
    },
    "subject_id": {
      "comment": "This is the same as visit id!",
      "field": "ï»¿subjid",
      "sensitive": true
    },
    "start_date": {
      "comment": "using the proposed hierarchy of dates",
      "combinedType": "firstNonNull",
      "fields": [
        {
          "field": "hostdat",
          "description": "Admission date at this facility"
        },
        {
          "field": "flw_date_adm",
          "description": "Roughly at what date were you first admitted to hospital?"
        },
        {
          "field": "cestdat",
          "description": "Onset date of first/earliest symptom"
        },
        {
          "field": "flw_date_symptoms",
          "description": "Roughly what day did you first experience symptoms of COVID-19?"
        },
        {
          "field": "dsstdat",
          "description": "Date of enrolment"
        },
        {
          "field": "daily_dsstdat",
          "description": "Date of assessment"
        },
        {
          "field": "flw_survey_date",
          "description": "About you and your COVID-19 illness (if you're completing this survey on behalf of a child or adult that you care for, all the questions relate to their health and wellbeing)"
        }
      ]
    },
    "icu_admission": {
      "field": "icu_hostdat",
      "mappingType": "exists"
    },
    "treatment_antibiotics": {
      "description": "Antibiotic agent?",
      "field": "antibiotic_cmyn",
      "values": {
        "1": true,
        "2": false,
        "3": null
      }
    },
    "treatment_antifungal_agent": {
      "description": "Antifungal agent?",
      "field": "antifung_cmyn",
      "values": {
        "1": true,
        "2": false,
        "3": null
      }
    },
    "treatment_antivirals": {
      "description": "Antiviral agent?",
      "field": "antiviral_cmyn",
      "values": {
        "1": true,
        "2": false,
        "3": null
      }
    },
    "treatment_corticosteroid": {
      "description": "Corticosteroid agent?",
      "field": "corticost_cmyn",
      "values": {
        "1": true,
        "2": false,
        "3": null
      }
    },
    "treatment_dexamethasone": {
      "description": "Treatment with Dexamethasone",
      "field": "corticost_cmtrt_type",
      "values": {
        "1": false,
        "2": false,
        "3": true,
        "88": false
      },
      "if": {
        "corticost_cmyn": 1
      }
    },
    "treatment_dialysis": {
      "description": "Renal replacement therapy (RRT) or dialysis",
      "combinedType": "any",
      "fields": [
        {
          "field": "rrt_prtrt",
          "values": {
            "1": true,
            "2": false,
            "3": null
          },
          "description": "Renal replacement therapy (RRT)"
        },
        {
          "field": "daily_rrt_cmtrt",
          "values": {
            "1": true,
            "2": false,
            "3": null
          },
          "description": "Dialysis / Hemofiltration?"
        }
      ]
    },
    "treatment_ecmo": {
      "description": "Extracorporeal (ECMO) support",
      "combinedType": "any",
      "fields": [
        {
          "field": "extracorp_prtrt",
          "values": {
            "1": true,
            "2": false,
            "3": null
          },
          "description": "Extracorporeal (ECMO) support"
        },
        {
          "field": "daily_ecmo_prtrt",
          "values": {
            "1": true,
            "2": false,
            "3": null
          },
          "description": "ECLS/ECMO"
        }
      ]
    },
    "treatment_high_flow_nasal_cannula": {
      "description": "High-flow nasal canula?",
      "combinedType": "any",
      "fields": [
        {
          "field": "oxygenhf_cmoccur",
          "values": {
            "1": true,
            "2": false,
            "3": null
          }
        },
        {
          "field": "daily_nasaloxy_cmtrt",
          "values": {
            "1": true,
            "2": false,
            "3": null
          }
        }
      ]
    },
    "treatment_inhaled_nitric_oxide": {
      "description": "Inhaled Nitric Oxide",
      "combinedType": "any",
      "fields": [
        {
          "field": "inhalednit_cmtrt",
          "values": {
            "1": true,
            "2": false,
            "3": null
          }
        },
        {
          "field": "daily_nitritc_cmtrt",
          "values": {
            "1": true,
            "2": false,
            "3": null
          }
        }
      ]
    },
    "treatment_inotropes_vasopressors": {
      "description": "Inotropes / vasopressors",
      "combinedType": "any",
      "fields": [
        {
          "field": "inotrop_cmtrt",
          "values": {
            "1": true,
            "2": false,
            "3": null
          },
          "description": "Inotropes / vasopressors"
        },
        {
          "field": "daily_inotrope_cmyn",
          "values": {
            "1": true,
            "2": false,
            "3": null
          },
          "description": "Any vasopressor / inotropic support?"
        }
      ]
    },
    "treatment_invasive_ventilation": {
      "description": "Invasive ventilation?",
      "combinedType": "any",
      "fields": [
        {
          "field": "invasive_proccur",
          "values": {
            "1": true,
            "2": false,
            "3": null
          },
          "description": "Invasive ventilation (Any intubation) ?"
        },
        {
          "field": "daily_invasive_prtrt",
          "values": {
            "1": true,
            "2": false,
            "3": null
          },
          "description": "Invasive ventilation?"
        }
      ]
    },
    "treatment_noninvasive_ventilation": {
      "description": "Non-invasive ventilation",
      "combinedType": "any",
      "fields": [
        {
          "field": "noninvasive_proccur",
          "values": {
            "1": true,
            "2": false,
            "3": null
          },
          "description": "Non-invasive ventilation ? (e.g. BIPAP, CPAP)"
        },
        {
          "field": "daily_noninvasive_prtrt",
          "values": {
            "1": true,
            "2": false,
            "3": null
          },
          "description": "Non-invasive ventilation (e.g. NIV (if shorter CRF), BIPAP, CPAP)?"
        }
      ]
    },
    "treatment_offlabel": {
      "description": "Off-label / Compassionate Use medications?",
      "field": "offlabel_cmyn",
      "values": {
        "1": true,
        "2": false,
        "3": null
      }
    },
    "treatment_other": {
      "combinedType": "any",
      "fields": [
        {
          "field": "daily_prperf",
          "values": {
            "1": true,
            "0": false,
            "2": null
          },
          "description": "Other intervention or procedure?"
        },
        {
          "field": "other_cmyn",
          "values": {
            "1": true,
            "2": false,
            "3": null
          },
          "description": "OTHER intervention or procedure"
        }
      ]
    },
    "treatment_oxygen_interface": {
      "description": "Oxygen therapy",
      "field": "oxygen_cmoccur",
      "values": {
        "1": true,
        "2": false,
        "3": null
      }
    },
    "treatment_oxygen_mechanical_support": {
      "description": "Oxygen therapy",
      "field": "oxygen_cmoccur",
      "values": {
        "1": true,
        "2": false,
        "3": null
      }
    },
    "treatment_oxygen_therapy": {
      "description": "Oxygen therapy",
      "field": "oxygen_cmoccur",
      "values": {
        "1": true,
        "2": false,
        "3": null
      }
    },
    "treatment_prone_position": {
      "description": "Prone Positioning",
      "combinedType": "any",
      "fields": [
        {
          "field": "pronevent_prtrt",
          "values": {
            "1": true,
            "2": false,
            "3": null
          },
          "description": "Prone ventilation"
        },
        {
          "field": "daily_prone_cmtrt",
          "values": {
            "1": true,
            "2": false,
            "3": null
          },
          "description": "Prone Positioning"
        }
      ]
    },
    "treatment_tocilizumab": {
      "description": "Treatment with Tocilizumab",
      "field": "antiviral_cmtrt",
      "values": {
        "1": true,
        "2": false,
        "3": false,
        "10": false
      },
      "if": {
        "antiviral_cmtrt": 9
      }
    },
    "treatment_neuraminidase": {
      "description": "Treatment with neuraminidase",
      "field": "antiviral_cmtrt",
      "values": {
        "1": false,
        "2": false,
        "3": false,
        "4": false,
        "5": true,
        "6": false,
        "7": false,
        "8": false,
        "9": false,
        "10": false,
        "11": false,
        "12": false
      },
      "if": {
        "antiviral_cmyn": 1
      }
    }
  }
}
